<div class="row">
  <div class="col-xs-12">
    <p><strong>Â¡Hola!</strong></p>
    <p>Inicie sesi&oacute;n para que conozcas tus <strong>mejores beneficios</strong></p>
    <br>
  </div>
</div>
{{#each ofertas}}
  <div class="row">
    <div class="col-xs-12">
      <div class="row datos-de-oferta" id="{{idOferta}}">
        <div class="col-xs-12">
          <div class="row">
            <div class="col-xs-12">
              {{#if esHtml}}
                <div class="html-de-oferta" id="html-de-oferta-{{idOferta}}"></div>
                <script type="text/javascript">
                $.get("{{imagenPublicidadPath}}", function(data) {
                  $("#html-de-oferta-{{idOferta}}").html(data);
                });
                </script>
              {{else}}
                <img src="{{imagenPublicidadPath}}" class="imagen-de-oferta">
              {{/if}}
            </div>
          </div>
          <div class="row nombre-del-comercio">
            <div class="col-xs-12">
              <strong>{{comercio}}</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12">
              <span>{{tituloDeOferta}}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="row contenedor-de-botones">
        <div class="col-xs-6">
          <div class="tiempo-transcurrido">Hace {{tiempoTranscurrido}}</div>
        </div>
        <div class="col-xs-6">
          <div class="row" idOferta="{{idOferta}}">
            {{#if esUnUsuarioConocido}}
              <div class="col-xs-3"><div class="boton-like {{like}}"></div></div>
              <div class="col-xs-3"><div class="boton-dislike {{dislike}}"></div></div>
            {{else}}
              <div class="col-xs-6"></div>
            {{/if}}
            <div class="col-xs-3"><div class="boton-escuchar"></div></div>
            <div class="col-xs-3"><div class="boton-compartir"></div></div>
          </div>
        </div>
      </div>
    </div>
  </div>
{{/each}}

<script type="text/javascript">
$(".boton-like, .boton-dislike").click(function() {
  var activo = $(this).parent().parent().find(".activo");
  if(activo.attr('class') != $(this).attr('class')) {
    activo.addClass("inactivo").removeClass("activo");
  }
  $(this).toggleClass("activo").toggleClass("inactivo");
});

$(".datos-de-oferta").click(function() {
  var id = $(this).attr("id");
  $.ajax({
    url: serverDomain + "/ofertas/" + id,
    success: function(data) {
      $(".panel-body").html(Handlebars.templates.oferta(data));
    }
  });
});
</script>
