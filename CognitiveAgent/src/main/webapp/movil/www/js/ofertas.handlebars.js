(function() {
  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};
templates['ofertas'] = template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<div class=\"row\">\n	<div class=\"col-xs-12\">\n		<p><strong>¡Hola!</strong></p><br>\n		<p>Inicie sesi&oacute;n para que conozcas tus <strong>mejores beneficios</strong></p>\n		<br>\n	</div>\n</div>\n\n<div class=\"contenedor-de-ofertas\">\n</div>\n<div id=\"contenedor-mostrar-mas\" style=\"display: none\">\n	<br>\n	<div class=\"row\">\n		<div class=\"col-xs-12 text-center\">\n			<span id=\"mostrar-mas\">Mostrar más</span>\n		</div>\n	</div>\n</div>\n\n<script type=\"text/javascript\">\nvar pagina = 1;\n\nfunction evaluarVerMas()\n{\n	ajax({\n		url: serverDomain + \"/ofertas/cantidad\",\n		done: function(data)\n		{\n			cargarOfertas();\n			var cantidadDeOfertasMostradas = pagina * 10;\n			if(data.cantidad > cantidadDeOfertasMostradas)\n			{\n				$(\"#contenedor-mostrar-mas\").show();\n			}\n		}\n	});\n}\n\nevaluarVerMas();\n\n$(\"#mostrar-mas\").on(\"click\", function()\n{\n	evaluarVerMas();\n	pagina++;\n});\n\nfunction bindAcciones()\n{\n	$(\"#ofertas .datos-de-oferta\").off(\"click\").on(\"click\", function()\n	{\n		$(\"#oferta .panel-body\").html(\"\");\n		cambiarVista(\"oferta\");\n		var id = $(this).attr(\"id\");\n		ajax({\n			url: serverDomain + \"/ofertas/\" + id,\n			done: function(data)\n			{\n				$(\"#oferta .panel-body\").html(Handlebars.templates.oferta(data));\n	\n				$(\"#oferta .boton-escuchar-oferta\").off(\"click\").on(\"click\", function()\n				{\n					agregarAColaDeReproduccion(\"/archivossubidos\" + $(this).data(\"audio\"));\n				});\n				$(\"#oferta .imagen-de-oferta\").each(function()\n				{\n					var path = serverDomain + $(this).attr(\"src\");\n					$(this).attr(\"src\", path);\n				});\n	 		}\n		});\n	});\n	\n	$(\"#ofertas .boton-like, #ofertas .boton-dislike\").off(\"click\").on(\"click\", function()\n	{\n		var parent = $(this).parent().parent();\n		var idDeLaOferta = $(this).data(\"id\");\n		var activo = parent.find(\".estado-1\");\n		if(activo.attr('class') != $(this).attr('class')) {\n			activo.addClass(\"estado-0\").removeClass(\"estado-1\");\n		}\n		$(this).toggleClass(\"estado-1\").toggleClass(\"estado-0\");\n		var esLike = parent.find(\".boton-like\").hasClass(\"estado-1\");\n		var esDislike = parent.find(\".boton-dislike\").hasClass(\"estado-1\");\n		var reaccion = null;\n		if(esLike)\n		{\n			reaccion = true;\n		}\n		else if(esDislike)\n		{\n			reaccion = false;\n		}\n		ajax({\n			type: \"POST\",\n			url: serverDomain + \"/reaccion/oferta\",\n			data:\n			{\n				idOferta: idDeLaOferta,\n				reaccion: reaccion\n			}\n		});\n	});\n	\n	$(\"#ofertas .boton-escuchar\").off(\"click\").on(\"click\", function()\n	{\n		agregarAColaDeReproduccion(\"/archivossubidos\" + $(this).data(\"audio\"));\n	});\n	\n	$(\"#ofertas .boton-compartir\").off(\"click\").on(\"click\", function()\n	{\n		agregarAColaDeReproduccion(\"/imagenes/beep-01a.wav\");\n	});\n}\n\nfunction agregarDominioAImagenes()\n{\n	$(\"#ofertas .imagen-de-oferta\").each(function()\n	{\n		var path = serverDomain + $(this).attr(\"src\");\n		$(this).attr(\"src\", path);\n	});\n}\n\nfunction cargarOfertas()\n{\n	ajax({\n		url: serverDomain + \"/ofertas\",\n		data:\n		{\n			pagina: pagina\n		},\n		done: function(data)\n		{\n			$(\"#ofertas .contenedor-de-ofertas\").append(Handlebars.templates.listaDeOfertas({ofertas: data}));\n			bindAcciones();\n			bindClickeable();\n			agregarDominioAImagenes();\n		}\n	});\n}\n</script>\n";
},"useData":true});
})();