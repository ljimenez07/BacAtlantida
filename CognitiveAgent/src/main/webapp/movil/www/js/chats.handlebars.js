(function() {
  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};
templates['chats'] = template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var helper;

  return "<div class=\"row\">\r\n	<div class=\"col-xs-10 col-sm-10 col-md-10 col-lg-10	col-xl-10\">\r\n		<input placeholder=\"Escribe aquÃ­\" type=\"text\" id=\"campoDeEntrada\" class=\"form-control\" >\r\n	</div>\r\n	<div class=\"col-xs-2 col-sm-2 col-md-2 col-lg-2	col-xl-2\">\r\n		<button id=\"enviar\" class=\"btn btn-default\"></button>\r\n	</div>\r\n</div>\r\n<style>\r\n	.panel-body\r\n	{\r\n		height: 350px;\r\n		overflow: scroll\r\n	}\r\n</style>\r\n\r\n<script>\r\n\r\n$(function(){\r\n	function initChats()\r\n	{\r\n		var chat = $(\".chat\");\r\n		var conversation = $(\"#conversation\");\r\n		var campoDeEntrada = $(\"#campoDeEntrada\");\r\n		var mensajeDeAgente = $('<li class=\"other\"><div class=\"msg\"><p></p><time>20:17</time></div></li>');\r\n		var mensajeDeUsuario = $('<li class=\"self\"><div class=\"msg\"><p></p><time>20:17</time></div></li>');\r\n		var botonDeEnviarMensaje = $(\"#enviar\");\r\n		\r\n		botonDeEnviarMensaje.click(function(){\r\n		\r\n			enviarAlServer({ textoAEnviar:campoDeEntrada.val() });\r\n			\r\n		});\r\n		\r\n		campoDeEntrada.keypress(function(e) {\r\n			if(e.which == 13) \r\n			{\r\n				enviarAlServer({ textoAEnviar:campoDeEntrada.val()});\r\n			}\r\n		});\r\n		\r\n		enviarAlServer({sePuedenEnviarVaciosAlServer:true, imprimirElMensajeQueElUsuarioEscribioEnLaConversacion:false, textoAEnviar:\"Hola\"});\r\n		\r\n		function enviarAlServer(param)\r\n		{\r\n			var sePuedenEnviarVaciosAlServer = ( param.sePuedenEnviarVaciosAlServer == undefined ) ? false : true;\r\n			var imprimirElMensajeQueElUsuarioEscribioEnLaConversacion = ( param.imprimirElMensajeQueElUsuarioEscribioEnLaConversacion == undefined ) ? true : false;\r\n			var textoAEnviar = param.textoAEnviar;\r\n					\r\n			if( ! sePuedenEnviarVaciosAlServer && textoAEnviar == \"\") return	\r\n			if( imprimirElMensajeQueElUsuarioEscribioEnLaConversacion )\r\n			{\r\n				var mensaje = mensajeDeUsuario.clone();\r\n				mensaje.find(\".msg p\").html(textoAEnviar);\r\n				campoDeEntrada.val(\"\");\r\n				conversation.append(mensaje);\r\n				\r\n				moveScrollParaAbjoEnFuncionDelUltimoMEnsaje();\r\n			}\r\n			\r\n			$.ajax({\r\n				type: \"POST\",\r\n				contentType :\"text/plain; charset=UTF-8\",\r\n				dataType : \"json\",\r\n				url : serverDomain+\"/conversacion/"
    + container.escapeExpression(((helper = (helper = helpers.pathDelServidor || (depth0 != null ? depth0.pathDelServidor : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"pathDelServidor","hash":{},"data":data}) : helper)))
    + "/\",\r\n				data : textoAEnviar\r\n			})\r\n			.done(function( data ) \r\n			{\r\n				var respuesta = mensajeDeAgente.clone();\r\n				respuesta.find(\".msg p\").html(data.texto);\r\n				conversation.append(respuesta);\r\n				\r\n				moveScrollParaAbjoEnFuncionDelUltimoMEnsaje();\r\n			})\r\n			.fail(function(XMLHttpRequest, textStatus, textStatus) \r\n			{\r\n				console.log(JSON.stringify(XMLHttpRequest));\r\n				console.log(XMLHttpRequest.responseJSON.exception);\r\n				if( XMLHttpRequest.responseJSON.exception.includes(\"NoSessionException\") )\r\n				{\r\n					var html = Handlebars.templates.layout(pantallas[\"login\"]);\r\n					$(\".app\").html(html);\r\n				}\r\n			});\r\n			\r\n		}\r\n		function moveScrollParaAbjoEnFuncionDelUltimoMEnsaje()\r\n		{\r\n			//console.log(chat.parent().height()+\"  \"+chat.parent()[0].scrollHeight+\"   \"+$(chat.parent()[0]).html());\r\n			chat.parent().scrollTop(chat.parent()[0].scrollHeight);\r\n		}\r\n\r\n	}\r\n	initChats();\r\n\r\n});\r\n</script>";
},"useData":true});
})();